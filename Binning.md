# Definitions

Vertex and node are synonyms, both are very similar to "course"

bin is the semesterVector class
schedule is a vector of semesterVector
having a dependency means that a node has an outgoing edge to another node within the same container

# About goodness

A schedule is a vector of semesterVectors, how good this schedule is is defined by how balanced it is:
balanced means that most semesters per schedule have as low as possible of credits and difficulty, While having the minimum number of semesters in the schedule.

As such, to calculate how good a schedule is we calculate:

1. The amount of semesters it has 

2. The semester with the maximum amount of (credits + difficulty)

3. The difference (an integer) between the semester with the maximum and the minimum amount of (credits + difficulty).

As more semesters are allowed, the more spread out and "balanced" the semesters can be, thus 1. is weighted more heavily

additionally, 2 is ensured to be less than the maximum number of credits allowed per semester, and as such is weighted lightly.

After correct weighting and adding, the closer this value "Complexity", is to 0, the better this schedule is.

# Labs

Labs generate a case of Co-dependencies that could form a cycle (unvalid graph to sort).

The current workaround is for all nodes to have a "hasLab" boolean value, and leave them isolated to a different list/Vector. When binning, if the node hasLab, then we search the list/Vector of labs and find the corresponding Lab for this Semester and bin them together.

this assumes all courses with lab have a non-lab theory part which I dont know if it holds for all majors


# Layered Topological Sort

LayeredTopo(Graph G)
    Create a vector of vector of vertexes (Layers).

    Set of all visited vertexes (Visited);

    while Visited.size() != G.Vertexes.size():
        create a vector (Layer) with all vertexes with no incoming edges
        
        delete from Layer all vertexes in Visited
        
        push Layer to Layers
        for all vertexes in Layer: 
            add to Visited
            delete all outgoing edges 

The pseudocode above excludes error detection for cyclic graphs

A challenge of this method is that this leaves the graph semi-destroyed as all its edges are deleted

# Layered Binning

pseudocode left halfway unfinished
LayeredBinning(Graph G):
    Layers = LayeredTopo(G)

    create empty bin B;

    create list of list of bins BestLayer

    for each Layer in Layers:

        for all of the permutations of the nodes LayerPerm in Layer:
            for each node in LayerPerm:
                if(B.credits >= B.nonElectiveCredits):
                    fill with electives

                if( (B.credits + node.credits )> creditsPerSemester):
                    add  node to bin

        
        integer vector Complexities of size(BestLayer.size());

        for all of the list of bins in BestLayer:
            

            


go through the layers generated by layered topological sort linearly and fill schedules, if any gaps appear then "fill" with electives.


future concepts:
    
    try better difficulty scrambling
    spread out CSE Electives in future
    give input of taken classes to give to layeredTopo to exclude as part of processedVertexes list

## Scrambling

maybe while checking for Schedule Complexity. 

## Permuting Layers

we can create all possible permutation of a layer

# Brute forcing

O(V!) complexity. Use at own risk.

AllValidTopoSorts(Graph G):
    Vector of schedules AllValidSchedules;
    for all topological sorts of Graph G:
        Create a schedule based on sort
        for each bin in schedule:
            if bin has any dependencies or has at least 3 electives:
                unvalid sort, dont add
            else:
                add sort to Valid Schedules

binningBrute(Graph G):
    for each schedule calculate its goodness
    return schedule with best goodness

# variable credit binning

AllValidTopoSorts(Graph G):
    Vector of schedules AllValidSchedules;
    for all topological sorts of Graph G:
        Create empty schedule SC
        create empty bin B
        

        for each node in sort:
            if bin + node.credits > maxCredits:
                push B to SC
                B = empty bin
            if(SC.size > maxSemesters):
                mark as unvalid sort, don't add (go to next topoSort)

            add node to B and Lab if node has one
            if bin has any dependencies:
                Bruh = last Node added to B
                pop last Node added to B
                fill B with electives from elective stack.
                push B to SC

                B = empty bin
                add Bruh to B
            
